\DocumentMetadata{
 uncompress,
 pdfversion=1.7,
 lang=en-US,
 testphase=phase-III
}

\documentclass{article}
\usepackage[lof]{etoc}

%\usepackage{hyperref}

\ExplSyntaxOn
 \msg_redirect_module:nnn { tag } { warning } { error }
\ExplSyntaxOff
\begin{document}

%\tableofcontents

%\listoffigures

\section{foo}

% \localtableofcontents

\locallistoffigures

\subsection{subfoo1}

\begin{figure}[htbp]
  \centering
  figure coucou
% non captioned figures do not make it to the lof file
  \caption{figure1}
\end{figure}

\end{document}
