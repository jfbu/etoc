\DocumentMetadata{
 uncompress,
 pdfversion=1.7,
 lang=en-US,
 testphase=phase-III
}
\ExplSyntaxOn
 \msg_redirect_module:nnn { tag } { warning } { error }
\ExplSyntaxOff
\documentclass{article}
\usepackage[T1]{fontenc}
\usepackage{etoc}
\begin{document}
\etocsetstyle{section}
  {(start) }
  {\etocname, }% no error if a \par here
  {}
  {(end) }% no error if a \par here

%\def\etocaftercontentshook{\par}% no error if using this

\tableofcontents % a \par is done at the end forcefully

\etocinline
\etocsettocstyle{}{}

\bigskip
inline toc \tableofcontents with text directly after it.

\bigskip

inline toc with no text directly after it \tableofcontents

\bigskip

\tableofcontents is an inline toc whose contents again got started in vmode,
and etoc added forcefully a \verb|\par| after contents to avoid the present
issue, so at this stage we can not have a TOC start a paragraph but not end it
but (as per the two examples above) we can have an inline TOC start inside a
paragraph and not end it itself (the second was ended by an empty line in
source).

\bigskip

\leavevmode
\tableofcontents is an inline toc at start of a paragraph, which had
to be started by user mark-up \verb|\leavevmode| so as to tell etoc that
the TOC should not end its contents with a \verb|\par|.


\bigskip

% stress test, to confirm root mechanism is that a \par must be done
% at same group level where the borrowed \@starttoc kernel hooks
% are executed (on first compilation .toc file is empty so only
% those hooks are done by etoc and an error is raised.

% to show the \par must be added by etoc after this "hook", which sadly
% we have made public. (it is not a hook in the meaning of lthooks.pdf)
\def\etocaftercontentshook{\par Hello}

\texttt{meaning of \string\etocaftercontentshook is \meaning\etocaftercontentshook}

\tableofcontents contents again got started in vmode, and etoc added
forcefully a \verb|\par| after contents (even after
\verb|\etocaftercontentshook|) to avoid the present issue.

\bigskip

\section{One}

Root cause seems to be that a \verb|\par| must be executed at the same
grouping level as the \verb|\@starttoc| upstream kernel hooks, which etoc has
borrowed.

\section{Two}

Text

\end{document}
